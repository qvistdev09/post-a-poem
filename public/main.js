(()=>{var e={911:(e,t,o)=>{const{helpers:n}=o(185),r={poemWordBtn:e=>{const t=document.createElement("div");t.setAttribute("class","word-div"),t.style.transform=`translateY(${n.randomInt(-15,15)}%)`;const o=document.createElement("button");o.setAttribute("onclick","removeWord(this)"),o.setAttribute("id",e+"-rm"),o.setAttribute("class","poem-word"),o.setAttribute("data-word",e),o.textContent=e;const r=document.createElement("p");r.setAttribute("class","close-icon"),r.textContent="X",o.appendChild(r);const d=document.createElement("div");return d.setAttribute("class","connector-div"),d.style.width=`${n.randomize(4,.8)}rem`,t.appendChild(d),t.appendChild(o),t},poemPaletteBtn:e=>{const t=document.createElement("button");return t.textContent=e,t.setAttribute("id",e+"-add"),t.setAttribute("data-word",e),t.setAttribute("class","palette-btn"),t.setAttribute("onclick","addWord(this)"),t},newRow:()=>{const e=document.createElement("div");return e.setAttribute("class","poem-row"),e.style.marginLeft=`${n.randomize(5,0)}rem`,e},submittedPoem:e=>{const t=document.createElement("div");t.setAttribute("class","submitted-poem-container");const o=document.createElement("h3");o.setAttribute("class","label");const n=new Date(e.created),r=n.getDate()+"-"+(n.getMonth()+1)+"-"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes(),d=document.createElement("span");d.textContent=r,o.appendChild(d),t.appendChild(o);const s=document.createElement("div");return s.setAttribute("class","labelled-container"),t.appendChild(s),e.rows.forEach((e=>{const t=document.createElement("div");t.setAttribute("class","poem-row"),t.style.marginLeft=`${e.margin}rem`,e.words.forEach((e=>{const o=document.createElement("div");o.setAttribute("class","word-div"),o.style.transform=`translateY(${e.height}%)`;const n=document.createElement("div");n.setAttribute("class","connector-div"),n.style.width=`${e.connector}rem`,o.appendChild(n);const r=document.createElement("p");r.setAttribute("class","poem-word"),r.textContent=e.word,o.appendChild(r),t.appendChild(o)})),s.appendChild(t)})),t}};e.exports.make=r},185:e=>{e.exports={randomize:(e,t)=>{const o=Math.floor(101*Math.random())/100;return e*o<t?t:e*o},randomInt:(e,t)=>Math.floor(Math.random()*(t-e+1))+e,setSeveralAttributes:(e,t)=>{Object.keys(t).forEach((o=>{e.setAttribute(o,t[o])}))}}},534:(e,t,o)=>{const{make:n}=o(911);function r(e,t,o){this.paletteDiv=e,this.poemDiv=t,this.submittedPoemsDiv=o}r.prototype.addWord=function(e){e.setAttribute("disabled","true");const t=n.poemWordBtn(e.innerText),o=this.poemDiv.getElementsByClassName("poem-row");for(let e of o)if(e.children.length<3)return void e.appendChild(t);const r=n.newRow();this.poemDiv.appendChild(r),r.appendChild(t)},r.prototype.removeWord=function(e){document.getElementById(e.getAttribute("data-word")+"-add").removeAttribute("disabled");const t=e.parentElement.parentElement;1===t.children.length?t.parentElement.removeChild(t):t.removeChild(e.parentElement)},r.prototype.generatePalette=function(e){[...this.paletteDiv.children].forEach((e=>{this.paletteDiv.removeChild(e)})),fetch("/api/words").then((e=>e.json())).then((e=>{for(let t of e){const e=n.poemPaletteBtn(t);this.paletteDiv.appendChild(e)}}))},r.prototype.submitPoem=function(){let e="";[...this.poemDiv.getElementsByClassName("poem-row")].forEach((t=>{e+=`<${t.style.marginLeft.replace("rem","")}>`,[...t.children].forEach((t=>{const o=t.querySelector(".connector-div").style.width.replace("rem",""),n=t.style.transform.match(/(?<=\()[^\(\)]+(?=\))/)[0].replace("%",""),r=t.querySelector("button").getAttribute("data-word");e+=`{${o};${n};${r}}`}))})),fetch("/api/poems",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e})}).then((()=>{window.location.href="/"}))},r.prototype.renderSubmittedPoems=function(){[...this.submittedPoemsDiv.children].forEach((e=>{this.submittedPoemsDiv.removeChild(e)})),fetch("/api/poems").then((e=>e.json())).then((e=>{e.forEach((e=>{const t=n.submittedPoem(e);this.submittedPoemsDiv.appendChild(t)}))}))},e.exports.create=(e,t,o)=>new r(e,t,o)}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}(()=>{const e=document.getElementById("word-palette"),t=document.getElementById("composed-poem"),n=document.getElementById("submitted-poems"),r=document.getElementById("submit-poem-btn"),d=o(534).create(e,t,n);r.addEventListener("click",(()=>{d.submitPoem()})),d.renderSubmittedPoems(),window.addWord=e=>{d.addWord(e)},window.removeWord=e=>{d.removeWord(e)}})()})();