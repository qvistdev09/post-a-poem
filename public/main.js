(()=>{var e={911:(e,t,n)=>{const{helpers:o}=n(185),r={poemWordBtn:e=>{const t=document.createElement("div");t.setAttribute("class","word-div"),t.style.transform=`translateY(${o.randomInt(-15,15)}%)`;const n=document.createElement("button");n.setAttribute("onclick","removeWord(this)"),n.setAttribute("id",e+"-rm"),n.setAttribute("class","poem-word"),n.setAttribute("data-word",e),n.textContent=e;const r=document.createElement("p");r.setAttribute("class","close-icon"),r.textContent="X",n.appendChild(r);const d=document.createElement("div");return d.setAttribute("class","connector-div"),d.style.width=`${o.randomize(4,.8)}rem`,t.appendChild(d),t.appendChild(n),t},poemPaletteBtn:e=>{const t=document.createElement("button");return t.textContent=e,t.setAttribute("id",e+"-add"),t.setAttribute("data-word",e),t.setAttribute("class","palette-btn"),t.setAttribute("onclick","addWord(this)"),t},newRow:()=>{const e=document.createElement("div");return e.setAttribute("class","poem-row"),e.style.marginLeft=`${o.randomize(5,0)}rem`,e},submittedPoem:e=>{const t=document.createElement("div");t.setAttribute("class","submitted-poem-container");const n=document.createElement("h3");n.setAttribute("class","label");const o=new Date(e.created),r=o.getDate()+"-"+(o.getMonth()+1)+"-"+o.getFullYear()+" "+o.getHours()+":"+o.getMinutes(),d=document.createElement("span");d.textContent=r,n.appendChild(d),t.appendChild(n);const s=document.createElement("div");return s.setAttribute("class","labelled-container"),t.appendChild(s),e.rows.forEach((e=>{const t=document.createElement("div");t.setAttribute("class","poem-row"),t.style.marginLeft=`${e.margin}rem`,e.words.forEach((e=>{const n=document.createElement("div");n.setAttribute("class","word-div"),n.style.transform=`translateY(${e.height}%)`;const o=document.createElement("div");o.setAttribute("class","connector-div"),o.style.width=`${e.connector}rem`,n.appendChild(o);const r=document.createElement("p");r.setAttribute("class","poem-word"),r.textContent=e.word,n.appendChild(r),t.appendChild(n)})),s.appendChild(t)})),t}};e.exports.make=r},185:e=>{const t={randomize:(e,t)=>{const n=Math.floor(101*Math.random())/100;return e*n<t?t:e*n},randomInt:(e,t)=>Math.floor(Math.random()*(t-e+1))+e};e.exports.helpers=t},534:(e,t,n)=>{const{make:o}=n(911);function r(e,t,n){this.paletteDiv=e,this.poemDiv=t,this.submittedPoemsDiv=n}r.prototype.addWord=function(e){e.setAttribute("disabled","true");const t=o.poemWordBtn(e.innerText),n=this.poemDiv.getElementsByClassName("poem-row");for(let e of n)if(e.children.length<3)return void e.appendChild(t);const r=o.newRow();this.poemDiv.appendChild(r),r.appendChild(t)},r.prototype.removeWord=function(e){document.getElementById(e.getAttribute("data-word")+"-add").removeAttribute("disabled");const t=e.parentElement.parentElement;1===t.children.length?t.parentElement.removeChild(t):t.removeChild(e.parentElement)},r.prototype.generatePalette=function(e){for(let t of e){const e=o.poemPaletteBtn(t);this.paletteDiv.appendChild(e)}},r.prototype.submitPoem=function(){let e="";[...this.poemDiv.getElementsByClassName("poem-row")].forEach((t=>{e+=`<${t.style.marginLeft.replace("rem","")}>`,[...t.children].forEach((t=>{const n=t.querySelector(".connector-div").style.width.replace("rem",""),o=t.style.transform.match(/(?<=\()[^\(\)]+(?=\))/)[0].replace("%",""),r=t.querySelector("button").getAttribute("data-word");e+=`{${n};${o};${r}}`}))})),fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e})}).then((()=>{window.location.href="/"}))},r.prototype.renderSubmittedPoems=function(){[...this.submittedPoemsDiv.children].forEach((e=>{this.submittedPoemsDiv.removeChild(e)})),fetch("/api").then((e=>e.json())).then((e=>{e.forEach((e=>{const t=o.submittedPoem(e);this.submittedPoemsDiv.appendChild(t)}))}))},e.exports.create=(e,t,n)=>new r(e,t,n)},776:e=>{"use strict";e.exports=JSON.parse('["silence","potato","is","justice","would","alarmingly","tremor","warned","in","places"]')}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{const e=document.getElementById("word-palette"),t=document.getElementById("composed-poem"),o=document.getElementById("submitted-poems"),r=document.getElementById("submit-poem-btn"),d=n(776),s=n(534).create(e,t,o);r.addEventListener("click",(()=>{s.submitPoem()})),s.generatePalette(d),s.renderSubmittedPoems(),window.addWord=e=>{s.addWord(e)},window.removeWord=e=>{s.removeWord(e)}})()})();